# Changes Log: 2025-03-25

## tRPC Dependency Compatibility Fixes - 12:50 AM

- Fixed compatibility issues between tRPC client and server by installing specific compatible versions of dependencies
- Downgraded tRPC packages (@trpc/client, @trpc/react-query) to version 10.37.1 to ensure compatibility
- Updated @tanstack/react-query to version 4.36.1 to be compatible with tRPC packages
- Resolved "Missing specifier" error in the build process related to @trpc packages
- Fixed formatting issues in relevant files for proper code style
- Successfully validated that all integration points between client and server work correctly
- Ensured a successful build process with all packages compiling properly

## TypeScript Configuration Fixes for GitHub Actions Build - 09:45 AM

- Updated base TypeScript configuration in `packages/typescript-config/base.json` to explicitly set types to `["node"]`
- Excluded `dist` directories from TypeScript compilation across all configurations
- Updated React library configuration to include proper DOM libraries and types
- Updated Vite configuration to explicitly include Vite client types
- Added explicit ESLint ignore patterns for `dist` directories to prevent linting type definition files
- Created proper ESLint configuration for the config package
- Fixed the "Cannot find type definition file for 'testing-library\_\_jest-dom'" error in GitHub Actions build
- Successfully validated changes with full passing build, lint, and format checks

## Client-Server Integration - 12:40 AM

- Created a tRPC client setup in the web app to connect to the API
- Implemented dashboard-related endpoints in the API server with mock data
- Created proper TypeScript types for dashboard data in both client and server
- Updated client components to fetch data from the API instead of using hardcoded mock data
- Added loading and error states to handle asynchronous data fetching
- Implemented proper icon mapping for Agent components to handle server-provided icon names
- Ensured type safety throughout the integration to prevent runtime errors

## Fixed Invalid Hook Call in tRPC Client - 2:15 PM

- Fixed "Invalid hook call" error appearing in browser console related to tRPC client implementation
- Refactored `createTrpcClient` function to use a proper React hook pattern by creating `useCreateTrpcClient` hook
- Modified the main application component structure to correctly use the hook within a functional component
- Eliminated `useState` calls outside of a component context which was causing the invalid hook call error
- Used React best practices for handling hook in client creation to follow React's rules of hooks
- Ensures proper instantiation of QueryClient and tRPC client configuration
- Successfully validated that the application compiles and runs without console errors
- Maintained the same header functionality and organizational context in the API requests

## Comprehensive Chat Mock Data Implementation - 3:30 PM

- Created dedicated `chatData.ts` mock data file with comprehensive chat scenarios
- Implemented 5 realistic chat sessions with diverse content and tool usage examples
- Added mock tools data with appropriate icons and descriptions
- Included advanced mock examples of tool usage for web search and code interpreter
- Created a reusable template for new chat sessions
- Updated both chat route components to use the structured mock data
- Followed type definitions from the UI package for type safety
- Implemented realistic conversation flows for various domains including AI research, programming, marketing, travel, and health
- Added simulation of API loading states for better user experience testing

## tRPC Chat API Integration - 4:45 PM

- Created a dedicated API chat router with endpoints for serving chat data
- Implemented endpoints for retrieving chat sessions, tools, and individual sessions
- Added message sending functionality with mock response handling
- Moved mock data from the frontend to the backend API
- Added simulated API latency to model real-world conditions
- Updated chat components to fetch data through tRPC client
- Implemented proper loading states and error handling
- Created consistent type definitions across client and server
- Improved structure for future real API integration
- Added optional mutation for message sending through the API

## Shared Types Package Implementation - 5:30 PM

- Created new `@vernisai/types` package for centralized type definitions
- Structured types by domain (chat, dashboard, user, common)
- Migrated chat-related types from UI package (Message, ChatSession, Tool, etc.)
- Migrated dashboard-related types (Agent, OrganizationInfo, UsageData, etc.)
- Added common utility types for pagination and responses
- Extended types with API-specific request/response types
- Created clear documentation for migration to shared types
- Designed for future database schema integration
- Improved separation of concerns between packages
- Eliminated type duplication between client and server

## Migrated to shared @vernisai/types - 02:14 AM

- Migrated dashboard types from API and web packages to shared @vernisai/types package
- Created ConversationSummary type for dashboard views
- Added TestMessage type to chat/message.ts
- Fixed imports in web and API packages to use the shared types
- Updated turbo.json to use "tasks" instead of "pipeline" for Turbo 2.0 compatibility
